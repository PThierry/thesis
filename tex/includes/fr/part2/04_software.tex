%%
%%
%% 04_software.tex for  in /home/phil/Travail/Doctorat/these/tex
%%
%% Made by Philippe THIERRY
%% Login   <Philippe THIERRYreseau-libre.net>
%%
%% Started on  lun. 12 nov. 2012 15:27:45 CET Philippe THIERRY
%% Last update lun. 12 nov. 2012 15:27:45 CET Philippe THIERRY
%%

\chapter{Solutions logicielles pour le temps réel et la sécurité}
\doMinitoc

\section{Le système GNU/Linux}

\subsection{A propos des solutions Linux pour le temps réel}

\subsubsection{Xenomai et RTAI}

\subsubsection{Linux-RT}

\subsection{Le noyau Linux et la sécurité}

\subsubsection{SELinux et les LSM}

\subsubsection{La suite GRSecurity}

\subsubsection{SMAC}

\subsubsection{AppArmor}

\section{Le système OpenBSD}

\section{Architectures pour le temps réel dur}

\subsection{Principes généraux dans l'avionique}

\subsection{L'IMA et les normes ARINC}

\subsection{Les autres systèmes temps réel}

\subsubsection{A propos des systèmes embarqués véhiculaires}

\chapter{A propos des solutions de virtualisation}
\doMinitoc

\section{Problématiques générale}

\section{Les différentes architectures logicielles de virtualisation}

\subsection{A propos des solutions de virtualisation invitées}

\subsection{Les architectures de virtualisation de type micro-noyaux}

\subsection{La compartimentation applicative}

\section{Les solutions de virtualisation Open-Source}

\subsection{L'hyperviseur KVM}

\subsection{L'hyperviseur Xen}

\subsubsection{Principes généraux}

\paragraph{}
Xen est un hyperviseur s'appuyant sur une architecture de type micro-noyau. Ce
dernier fournit les élements de base pour la gestion et le déploiement des
machines virtuelles, sous le contrôle d'une machine virtuelle particulière
correspondant à un domaine d'administration, nommée dans le cas de Xen {\it
  dom0}.

\paragraph{}
Ce domaine possède des droits élargis sur l'interface de communication entre
l'hyperviseur et les machines virtuelles. Ce dernier est en effet apte à
créer, configurer, lancer, stopper ou détruire toute autre machine virtuelle,
dénommée dans le cadre de Xen {\it domU}, pour domaine Utilisateur.

\paragraph{}
Xen fournit une solution de virtualisation de niveau OS. Ainsi, chaque machine
virtuelle possède sont propre noyau. Ce dernier peut être géré de plusieurs
manières:
\begin{enumerate}
  \item Via de la paravirtualisation. Dans ce cas, le noyau du domaine
    utilisateur est modifié pour s'appuyer sur l'API de l'hyperviseur dès
    qu'il est nécessaire de faire un traitement nécessitant des droits
    d'administrateur sur la machine
  \item Via de la virtualisation matérielle. Dans ce cas, l'hyperviseur
    s'appuie sur les mécanismes de virtualsation matériels tels que Intel-VT
    ou AMD-V pour gérer la ségrégation des accès au périphériques et à la
    mémoire. Cela permet d'exécuter des noyaux virtualisés non modifiés, comme
    le noyau Windows.
\end{enumerate}

\subsubsection{Avantages et inconvénients}

\paragraph{}
Xen est une solution de virtualisation proposant plusieurs éléments
intéressants en terme de cloisonnement. Il peut assurer un cloisonnement
strict de la mémoire entre les machines virtuelles. Il est également apte à
assurer une charge minimum garantie à chaque machine virtuelle pour un laps de
temps donné. C'est le mécanisme de type SEDF décrit dans l'hyperviseur.\\
Il ne permet cependant pas de définir des politiques d'ordonnancement strictes
type Time Division Multiplexing.

\paragraph{}
Les taches des machines virtuelles sont exécutées et ordonnancées par le noyau
invité de chacune d'entre elle. L'hyperviseur n'a donc pas la visibilité sur
la charge ou la manière dont sont ordonnancées les taches hébergées dans les
machines virtuelles. Cependant, il est apte à réagir aux évènements matériels
asynchrones, en faisant varier l'ordonnancement des machines virtuelles pour
limiter la latence de traitement. Cependant, un tel ordonnancement ne permet
aucunement un support du temps réel.

\paragraph{}
Parmi les solutions open-source connues de virtualisation ou de conteneurisation,
l'hyperviseur Xen est celui ayant la plus petite empreinte mémoire, du fait de
son architecture de type micro-noyau. Cependant, parmi les micro-noyaux, il
reste très volumineux avec ses 250.000 lignes de codes, en comparaison avec
les noyaux de la famille L4.

\paragraph{}
La gestion du réseau dans la solution Xen s'appuie exclusivement sur la pile
réseau du domaine d'administration. Ainsi, la définition du réseau virtuel se
fait via l'usage de bridges dans ce domaine, générant un overhead non nul dans
le chemin de donnée réseau d'une machine virtuelle utilisateur.\\
Ainsi, lorsque deux machines virtuelles communiquent, l'ordonnancement du
domaine d'administration est nécessaire pour permettre au flux d'être reçu
de l'émetteur puis renvoyé vers le destinataire.

\paragraph{}
D'un point de vue sécurité, le domaine d'administration est d'ailleurs un
élement dangereux car ayant des droits très étendus. La solution CubesOS, qui
a été maquettée sur l'hyperviseur Xen, s'appuie sur un mécanisme de
chiffrement/déchiffrement des données entre les machines virtuelles
utilisateur afin de limiter l'impact d'une corruption du domaine
d'administration. Les systèmes de fichiers des machines virtuelles
utilisateurs sont également chiffré afin de limiter la capacité du domaine
d'administration de modifier son contenu.\\
L'usage d'un tel domaine permet de pouvoir simplifier la gestion de la
dynamicité des machines virtuelles, ainsi que l'interaction avec le matériel,
mais au dépend de la sécurité générale du système. Il est donc d'usage de
sortir le domaine d'administration de l'architecture logique, le rendant
accessible exclusivement via une console locale d'administration.\\
Enfin, cette solution n'est à ce jour pas certifiable du fait de la volumétrie
de l'hyperviseur.

\subsection{Le système QubesOS}

\subsection{OpenVZ et LXC}

\subsection{Couplage avec les mécanismes de sécurité de Linux}
