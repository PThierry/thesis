%%
%%
%% hardware_impacts.tex for thesis in /doctorat/these/tex
%%
%% Made by Philippe THIERRY
%% Login   <Philippe THIERRYreseau-libre.net>
%%
%% Started on  Fri Mar 12 16:36:41 2010 Philippe THIERRY
%% Last update Mon Aug 30 17:00:21 2010 Philippe THIERRY

\chapter{A propos de l'état de l'art de la sécurité des solutions de
virtualisation}
\doMinitoc

\section{A propos des solutions de virtualisation étudiée}

\paragraph{}
Solution type I (paravirtualisation sur base hyperviseur (non hosted), hw indépendant)

\section{Etude de la sécurité des solutions de virtualisation existantes}

\subsection{Etude de la solution Xen}

\subsubsection{Principe}
\paragraph{}
Xen est un hyperviseur s'appuyant sur une architecture de type micro-noyau. Ce
dernier fournit les élements de base pour la gestion et le déploiement des
machines virtuelles, sous le contrôle d'une machine virtuelle particulière
correspondant à un domaine d'administration, nommée dans le cas de Xen {\it
  dom0}.

\paragraph{}
Ce domaine possède des droits élargis sur l'interface de communication entre
l'hyperviseur et les machines virtuelles. Ce dernier est en effet apte à
créer, configurer, lancer, stopper ou détruire toute autre machine virtuelle,
dénommée dans le cadre de Xen {\it domU}, pour domaine Utilisateur.

\paragraph{}
Xen fournit une solution de virtualisation de niveau OS. Ainsi, chaque machine
virtuelle possède sont propre noyau. Ce dernier peut être géré de plusieurs
manières:
\begin{enumerate}
  \item Via de la paravirtualisation. Dans ce cas, le noyau du domaine
    utilisateur est modifié pour s'appuyer sur l'API de l'hyperviseur dès
    qu'il est nécessaire de faire un traitement nécessitant des droits
    d'administrateur sur la machine
  \item Via de la virtualisation matérielle. Dans ce cas, l'hyperviseur
    s'appuie sur les mécanismes de virtualsation matériels tels que Intel-VT
    ou AMD-V pour gérer la ségrégation des accès au périphériques et à la
    mémoire. Cela permet d'exécuter des noyaux virtualisés non modifiés, comme
    le noyau Windows.
\end{enumerate}

\subsubsection{Synthèse}

\paragraph{}
Xen est une solution de virtualisation proposant plusieurs éléments
intéressants en terme de cloisonnement. Il peut assurer un cloisonnement
strict de la mémoire entre les machines virtuelles. Il est également apte à
assurer une charge minimum garantie à chaque machine virtuelle pour un laps de
temps donné. C'est le mécanisme de type SEDF décrit dans l'hyperviseur.\\
Il ne permet cependant pas de définir des politiques d'ordonnancement strictes
type Time Division Multiplexing.

\paragraph{}
Les taches des machines virtuelles sont exécutées et ordonnancées par le noyau
invité de chacune d'entre elle. L'hyperviseur n'a donc pas la visibilité sur
la charge ou la manière dont sont ordonnancées les taches hébergées dans les
machines virtuelles. Cependant, il est apte à réagir aux évènements matériels
asynchrones, en faisant varier l'ordonnancement des machines virtuelles pour
limiter la latence de traitement. Cependant, un tel ordonnancement ne permet
aucunement un support du temps réel.

\paragraph{}
Parmi les solutions open-source connues de virtualisation ou de conteneurisation,
l'hyperviseur Xen est celui ayant la plus petite empreinte mémoire, du fait de
son architecture de type micro-noyau. Cependant, parmi les micro-noyaux, il
reste très volumineux avec ses 250.000 lignes de codes, en comparaison avec
les noyaux de la famille L4.

\paragraph{}
La gestion du réseau dans la solution Xen s'appuie exclusivement sur la pile
réseau du domaine d'administration. Ainsi, la définition du réseau virtuel se
fait via l'usage de bridges dans ce domaine, générant un overhead non nul dans
le chemin de donnée réseau d'une machine virtuelle utilisateur.\\
Ainsi, lorsque deux machines virtuelles communiquent, l'ordonnancement du
domaine d'administration est nécessaire pour permettre au flux d'être reçu
de l'émetteur puis renvoyé vers le destinataire.

\paragraph{}
D'un point de vue sécurité, le domaine d'administration est d'ailleurs un
élement dangereux car ayant des droits très étendus. La solution CubesOS, qui
a été maquettée sur l'hyperviseur Xen, s'appuie sur un mécanisme de
chiffrement/déchiffrement des données entre les machines virtuelles
utilisateur afin de limiter l'impact d'une corruption du domaine
d'administration. Les systèmes de fichiers des machines virtuelles
utilisateurs sont également chiffré afin de limiter la capacité du domaine
d'administration de modifier son contenu.\\
L'usage d'un tel domaine permet de pouvoir simplifier la gestion de la
dynamicité des machines virtuelles, ainsi que l'interaction avec le matériel,
mais au dépend de la sécurité générale du système. Il est donc d'usage de
sortir le domaine d'administration de l'architecture logique, le rendant
accessible exclusivement via une console locale d'administration.\\
Enfin, cette solution n'est à ce jour pas certifiable du fait de la volumétrie
de l'hyperviseur.

\subsubsection{Conclusion}

\paragraph{}
La solution Xen est intéressante pour ses propriétés de partitionnement
spacial strict. Cependant, il net permet pas de manière aisé un
partitionnement temporel strict de type TDM. La restriction principale à son
usage est son manque de portabilité sur les architectures embarquées. A ce
jour, seul les architectures ARM et x86/x86\_64 sont supportées, ce qui pose
porblème dans les domaines de l'avionique et des télécom, où l'architecture
PowerPC est prédominante.

\subsection{QubesOS}

\subsubsection{Principe}

\paragraph{}
QubesOS est une solution logicielle ciblant les postes de travail. Les
exigences initiales de la solution Qubes et de pouvoir assurer la
confidentialité des données personnelles et professionnelles. Afin de pouvoir
répondre à cette exigence, QubesOS s'appuie sur une architecture comparimentée
exécutant de manière autonomes des environnements
d'exécutions pour chaque type de donnée.\\
Les accès aux périphériques sont déportés dans un domaine de confiance afin de
limiter l'accès au matériel pour les environnements compartimentés.\\

\subsubsection{Synthèse}

\paragraph{}
La solution Qubes s'appuie sur l'hyperviseur Xen et un mécanisme d'aggrégation
de la sortie graphique afin de permettre un accès unifié aux applications des
différents domaines de confidentialité. La solution Qubes s'appuie sur un
outillage complexe et des mécanisme de communicatons entre les compartiment
avec le support du chiffrement des données émises. Cependant, la solution
complète QubesOS est lourde et cible exclusivement les postes de travail x86
récents. La solution n'est pascompatible avec les besoins embarqués, mais le
principe de compartimentation et les mécanisme internes de chiffrement sont
intéressant pour le besoin de confidentialité des données.

\subsection{Conténaires LXC}

\subsubsection{Principe}

\subsubsection{Synthèse}

\subsection{La famille L4}

\subsubsection{Principe}

\subsubsection{Synthèse}

\subsection{L'hyperviseur PikeOS}

\subsubsection{Principe}

\subsubsection{Synthèse}

